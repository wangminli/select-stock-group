"""
æ ‡é¢˜ï¼šã€ä»»åŠ¡1ã€‘ã€RoshanğŸ²430ã€‘åŸºäºå¸‚å€¼å’Œå¼‚å¸¸æ¢æ‰‹ç‡è¿‡æ»¤ç­–ç•¥_54.19%_-37.79%_1.43
é“¾æ¥ï¼šhttps://bbs.quantclass.cn/thread/65549
è¯„ä»·ï¼š
	äº®ç‚¹ï¼š
	ç¼ºç‚¹ï¼š
	15å¹´å›æ’¤å¤§å°ï¼š
	22ã€23å¹´æ¶¨è·Œï¼š
	å¯¹æ•°åæ ‡è½´æ–œç‡ï¼š
	RankICè¡¨ç°ï¼š

æ•´ä½“è¡¨ç°ï¼š

"""

import os
from pathlib import Path

# ====================================================================================================
# 1ï¸âƒ£ å›æµ‹é…ç½®
# ====================================================================================================
# å›æµ‹æ•°æ®çš„èµ·å§‹æ—¶é—´ã€‚å¦‚æœå› å­ä½¿ç”¨æ»šåŠ¨è®¡ç®—æ–¹æ³•ï¼Œåœ¨å›æµ‹åˆæœŸå› å­å€¼å¯èƒ½ä¸º NaNï¼Œå®é™…çš„é¦–æ¬¡äº¤æ˜“æ—¥æœŸå¯èƒ½æ™šäºè¿™ä¸ªèµ·å§‹æ—¶é—´ã€‚
start_date = "2015-01-01"
# å›æµ‹æ•°æ®çš„ç»“æŸæ—¶é—´ã€‚å¯ä»¥è®¾ä¸º Noneï¼Œè¡¨ç¤ºä½¿ç”¨æœ€æ–°æ•°æ®ï¼›ä¹Ÿå¯ä»¥æŒ‡å®šå…·ä½“æ—¥æœŸï¼Œä¾‹å¦‚ '2024-11-01'ã€‚
end_date = "2025-08-07"

# ====================================================================================================
# 2ï¸âƒ£ æ•°æ®é…ç½®
# ====================================================================================================
# æ•°æ®ä¸­å¿ƒçš„æ–‡ä»¶å¤¹ï¼Œä½¿ç”¨æ•°æ®å®¢æˆ·ç«¯ï¼Œå¹¶è®¢é˜…ç›¸å…³æ•°æ®ï¼Œå°±ä¸éœ€è¦å†æ‰‹åŠ¨æŒ‡å®šæ¯ä¸€ä¸ªå¿…è¦æ•°æ®
data_center_path = Path(r"/Users/wangminli/æˆ‘çš„æ–‡æ¡£/Quant/é‚¢ä¸è¡Œé‡åŒ–è¯¾ç¨‹-ä»˜è´¹/ä¸‹è½½æ•°æ®/")

# æ•°æ®æºçš„å®šä¹‰ï¼Œå¦‚æœä¸ä½¿ç”¨æ•°æ®å®¢æˆ·ç«¯çš„æ—¶å€™ï¼Œå¯ä»¥æ‰‹åŠ¨è‡ªå®šä¹‰ä»¥ä¸‹é€ä¸ªæ•°æ®æº
# ** è‚¡ç¥¨æ—¥çº¿æ•°æ® å’Œ æŒ‡æ•°æ•°æ®æ˜¯å¿…é¡»çš„ï¼Œå…¶ä»–çš„æ•°æ®å¯ä»¥åœ¨ data_sources ä¸­å®šä¹‰ **
# (å¿…é€‰) è‚¡ç¥¨æ—¥çº¿æ•°æ®ï¼Œå…¨é‡æ•°æ®ä¸‹è½½é“¾æ¥ï¼šhttps://www.quantclass.cn/data/stock/stock-trading-data
# å‚è€ƒï¼šhttps://bbs.quantclass.cn/thread/39599
# (å¿…é€‰) è‚¡ç¥¨æ—¥çº¿æ•°æ®ï¼Œå…¨é‡æ•°æ®ä¸‹è½½é“¾æ¥ï¼šhttps://www.quantclass.cn/data/stock/stock-trading-data
stock_data_path = data_center_path / r"stock-trading-data-pro-2025-08-07"  # å‚è€ƒï¼šhttps://bbs.quantclass.cn/thread/39599
# (å¿…é€‰) æŒ‡æ•°æ•°æ®è·¯å¾„ï¼Œå…¨é‡æ•°æ®ä¸‹è½½é“¾æ¥ï¼šhttps://www.quantclass.cn/data/stock/stock-main-index-data
index_data_path = data_center_path /r"stock-main-index-data-2025-08-06"
# (å¯é€‰) è´¢åŠ¡æ•°æ®ï¼Œå…¨é‡æ•°æ®ä¸‹è½½é“¾æ¥ï¼šhttps://www.quantclass.cn/data/stock/stock-fin-data-xbx
fin_data_path =data_center_path / r"stock-fin-data-xbx-2025-08-07"



# ====================================================================================================
# 3ï¸âƒ£ ç­–ç•¥é…ç½®
# ====================================================================================================

strategy = {
    'name': 'æ¢æ‰‹ç‡å°å¸‚å€¼è¿‡æ»¤',  # ç­–ç•¥å
    'hold_period': '3D',  # æŒä»“å‘¨æœŸï¼ŒW ä»£è¡¨å‘¨ï¼ŒM ä»£è¡¨æœˆï¼Œè¿˜æ”¯æŒæ—¥é¢‘ï¼š3Dã€5Dã€10D
    'select_num': 10,  # é€‰è‚¡æ•°é‡ï¼Œå¯ä»¥æ˜¯æ•´æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯å°æ•°ï¼Œæ¯”å¦‚ 0.1 è¡¨ç¤ºé€‰å– 10% çš„è‚¡ç¥¨
    "factor_list": [  # é€‰è‚¡å› å­åˆ—è¡¨
        # ('æŒ¯å¹…', True, 90, 5),
        # ('æˆäº¤é¢ç¼©é‡å› å­', True, (5, 30), 1),
        # ('æˆäº¤é¢ç¼©æ³¢å› å­', True, (5, 30), 1),
        # ('Ret', True, 5, 1),
        ('çª—å£æœ€é«˜ä»·æ¯”å€¼', True, 120, 1),
        # ('å¸‚å€¼', True, None, 1),
        # ('å›æ’¤', False, 3, 1),
    ],
    "filter_list": [
        # ('æ”¶ç›˜ä»·', '', 'val:>=5'),
        ('å¸‚å€¼', None, 'pct:<0.1'),
        # ('MACDåº•èƒŒç¦»ä¿®æ”¹', True, 'val:==1'),
        ('çª—å£æœ€ä½ä»·æ¯”å€¼', 120, 'pct:>=0.2'),  # æ’é™¤60å¤©æ¥è¿‘æœ€ä½ä»·åŒºé—´ï¼ˆè¿è·Œï¼‰
        ('å¼‚å¸¸é«˜æ¢æ‰‹ç‡è¿‡æ»¤', 10, 'val:==0'),  # ä½¿ç”¨10æ—¥çª—å£ï¼Œæ’é™¤å› å­å€¼ä¸º1çš„è‚¡ç¥¨

        # ('Xå…‰è„šé˜´çº¿', 0, 'val:!=1'),
    ]  # è¿‡æ»¤å› å­åˆ—è¡¨
}

days_listed = 250  # ä¸Šå¸‚è‡³ä»Šäº¤æ˜“å¤©æ•°

excluded_boards = ["cyb", "kcb", "bj"]  # åŒæ—¶è¿‡æ»¤åˆ›ä¸šæ¿å’Œç§‘åˆ›æ¿å’ŒåŒ—äº¤æ‰€

# equity_timing = {"name": "ä¸‡å¾—å¾®ç›˜è‚¡PB"}
# equity_timing = {"name": "ä¸‡å¾—å¾®ç›˜è‚¡PB"}



# ====================================================================================================
# 4ï¸âƒ£ æ¨¡æ‹Ÿäº¤æ˜“é…ç½®
# ä»¥ä¸‹å‚æ•°å‡ ä¹ä¸éœ€è¦æ”¹åŠ¨
# ====================================================================================================
initial_cash = 10_0000  # åˆå§‹èµ„é‡‘10w
# initial_cash = 1_0000_0000  # åˆå§‹èµ„é‡‘10w
# æ‰‹ç»­è´¹
c_rate = 1.2 / 10000
# å°èŠ±ç¨
t_rate = 1 / 1000
# å¹¶è¡Œè¿è¡Œçš„è¿›ç¨‹æ•°
n_jobs = os.cpu_count() - 1

# =====å‚æ•°é¢„æ£€æŸ¥=====
if Path(stock_data_path).exists() is False:
    print(f"è‚¡ç¥¨æ—¥çº¿æ•°æ®è·¯å¾„ä¸å­˜åœ¨ï¼š{stock_data_path}ï¼Œè¯·æ£€æŸ¥é…ç½®æˆ–è”ç³»åŠ©æ•™ï¼Œç¨‹åºé€€å‡º")
    exit()
if Path(index_data_path).exists() is False:
    print(f"æŒ‡æ•°æ•°æ®è·¯å¾„ä¸å­˜åœ¨ï¼š{index_data_path}ï¼Œè¯·æ£€æŸ¥é…ç½®æˆ–è”ç³»åŠ©æ•™ï¼Œç¨‹åºé€€å‡º")
    exit()
